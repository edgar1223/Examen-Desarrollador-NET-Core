<app-menu></app-menu>
<div class="container d-flex flex-column flex-md-row justify-content-center align-items-start min-vh-100">
    <div class="card p-4 shadow-lg flex-grow-1">
        <h2 class="text-center mb-4">Lista de Artículos</h2>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Descripción</th>
                        <th>Stock</th>
                        <th>Precio Unitario</th>
                        <th>Total</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let articulo of articulos">
                        <td>{{ articulo.Codigo }}</td>
                        <td>{{ articulo.Descripcion }}</td>
                        <td>{{ articulo.Stock }}</td>
                        <td>{{ articulo.Precio | currency }}</td>
                        <td>{{ articulo.Stock * articulo.Precio | currency }}</td>
                        <td>
                            <button (click)="reducirStock(articulo)" class="btn btn-danger">
                                <i class="fa fa-minus"></i> 
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="d-flex flex-column align-items-center mt-4">
            <div class="mb-3">
                <h4>Total General: {{ total | currency }}</h4>
            </div>
            <div class="d-flex align-items-center">
                <button (click)="comprar()" class="btn btn-primary">Comprar</button>
            </div>
        </div>
    </div>
    
    <!-- Div para el historial de compras -->
     <div class="card p-4 shadow-lg ml-md-4" style="flex-basis: 300px;">
        <h5 class="text-center mb-4">Historial de Compras</h5>
        <div *ngIf="historialCompras">
            <h6 class="text-center mb-2">{{ historialCompras.Nombre }} {{ historialCompras.Apellidos }}</h6>
            <ul class="list-group">
                <li class="list-group-item" *ngFor="let compra of historialCompras.Articulos">
                    <strong>{{ compra.Articulo.Descripcion }}</strong> - {{ compra.Fecha | date:'short' }}
                </li>
            </ul>
        </div>
    </div>
</div>
